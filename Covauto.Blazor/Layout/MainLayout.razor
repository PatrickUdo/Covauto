@using Covauto.Blazor.Services
@inherits LayoutComponentBase

<header class="bg-gray-900 text-white px-6 py-4 shadow-md">
	<div class="container mx-auto flex items-center justify-between">
		<h1 class="text-xl font-bold">Covadis leen auto</h1>
		<nav class="space-x-4">
			<a href="/" class="text-white px-3 py-2 rounded-md hover:bg-gray-800 hover:text-indigo-300 transition duration-200">Reservering maken</a>
			<button @onclick="LogoutAsync" class="text-white px-3 py-2 rounded-md hover:bg-gray-800 hover:text-indigo-300 transition duration-200">
				Uitloggen
			</button>
		</nav>
	</div>
</header>

<div class="page container mx-auto p-6">
	@Body
</div>

@code {
	[Inject] private NavigationManager Nav { get; set; }
	[Inject] private IAuthService AuthService { get; set; }

	private async Task LogoutAsync()
	{
		try
		{
			await AuthService.LogoutAsync();
			Nav.NavigateTo("/login", forceLoad: true);
		}
		catch
		{
			Nav.NavigateTo("/login", forceLoad: true);
		}
	}
}
